docs:

- home page is cached based on {key, localization and branch_id}. The cache will be cleared when advertisement / product / branches product is created or updated or deleted
- manager role will receive the order notification by default
- api content is filtered based on branch and published_at
- DB builder is used in {home service + cache service + session service + filament widgets + transactions + insert order archive}
- optional authentication is used in {set the default branch + favorite product}
- default branch is set in {SetCurrentBranch middleware} and effect {BranchScope + AppServiceProvider -> configureBuilder}
- advertisements / coupons / branches products / payment are scoped based on the branch id
- advertisement model has a getter propriety called link: which means the advertisement can be connected to {product and category, category, external link}
- categories are build like a tree and they follow these rules:
    - a category can only connect to a parent category
    - category hierarchy depth cannot exceed 3 levels.
    - a product can not connect to root categories
- city model has a boundary field, it saves five points each point has three keys: {name, latitude, longitude} these point represent a rectangular shape. they are saved as json string. The points are:
    - bl: bottom left
    - br: bottom right
    - tr: top right
    - tr: top right
    - c: center
- coupon model has one type which is TIMED other types can be added and configured in the CouponType enum
- multiPaymentMethods can be added and configured using a class that follows this declaration {class ThePaymentGateway extends BasePaymentGateway implements PaymentGatewayInterface}
- translation fields are handled by laravel spatie translation spatie/laravel-translatable
    - there is a custom component called TranslationComponent that handles translation 
    - there is a custom helper function get_translatable_attribute() which is used when the db builder is used instead of eloquent
- third party services:
    - twilio/sdk: handle OTP
    - stevebauman/location: handle IP info
    - kreait/laravel-firebase: handle firebase notifications
    - MoyasarPaymentGateway: handle payment methods
- a SetupException will be fired if:
    - there is no customer role
    - there is no default branch
    - there is no user who has {can-receive-order-notifications} permission
    - one of the required settings keys are missing
- publish logic
    - payment methods can be created and published per branch | unpublished is denied for pay-on-delivery payment method
    - coupons can be created and published per branch | unpublished is ok
    - advertisement can be created and published per branch | unpublished is ok
    - categories can be created and published per branch | unpublished will not be cascaded to products
    - branches can be published only if:
        1- at least one delivery user attached
        2- at least one user to receive notification order
        3- pay-on-delivery payment method is published
        - unpublished will be cascaded to products
    - branches products can be published only if: they have their config set | unpublished is ok
    - any publishable model will not be appear in the api if its not published
    - for advertisement which are connected to unpublished will not be appear in the api
    - effected api:
        - GetFavoriteProducts
        - GetOrderDetails
        - GetPackageProducts
        - GetProductDetails
        - GetProducts
        - GetHome
- notification
    - notification send to users
        - when order status change the system send in-app (mobile) / firebase (mobile) notification
        - when a reply is created for a ticket the system send in-app / firebase notification
    - notification send to delivery
        - when an order status is attached to delivery the system send in-app (dashboard) notification
    - notification send to manager / users who has the {can-receive-order-notifications} permission
        - when an order is created the system send in-app (dashboard) notification
        - when an order is cancelled the system send in-app (dashboard) notification
- policy
    - app policy is handled by policies classes
    - role permissions are handled by trait called CanManagePermissions
- settings 
    - SettingsService is responsible to define the getter of each setting, the form component of each setting, the cast of each setting and to cache them all